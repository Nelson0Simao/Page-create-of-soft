import{j as o}from"./jquery.js";import{f as h}from"./sourcebuster.js";import"./_commonjs-dynamic-modules.js";h();const d=o('[data-id="contact-form-button"]'),l=o('[data-id="form-errors"]'),m=o("[data-field]"),R=o("[data-form]"),r=o('[data-id="contact-form"]'),v=o('[data-id="contact-error-info"]'),u=t=>`contact__submit-button--${t}`,c=t=>d.addClass(u(t)),f=t=>d.removeClass(u(t)),b=()=>{l.html(""),m.removeClass("contact--error")},F=()=>{const t=r.find("input"),e=r.find("textarea"),s=r.find("select");t.filter((n,i)=>i.type==="file").each(function(){const n=o(this).data("previous");Boolean(n)&&o(this).attr("data-value",n)}),t.val(""),e.val(""),s.each(function(){this.selectedIndex=0})},x=t=>{const e=t.map(y);l.html(e)},I=t=>{t.forEach(e=>{o(`[data-field="${e}"]`).addClass("contact--error")})},g=(t,e)=>{x(t),I(e)},y=t=>`<li class="error-message">${t}</li>`,T=()=>{b(),c("loading")},k=()=>R.prop("disabled",!0),D=t=>{const{responseJSON:e}=t;if(f("loading"),t.status===500||!e){const a=[v.data("error")];return p(a,[])}return e.ok?A():p(e.errors,e.invalid_fields)},A=()=>{c("success"),F(),k(),gtagReportConversion()},p=(t,e)=>{g(t,e),c("error"),setTimeout(()=>f("error"),1500)},C=()=>{o(".grecaptcha-badge").css("visibility","visible")};o("form input, form textarea, form select").on("focus",C);const E=t=>{switch(t){case"contact":return{executeRecaptcha:executeRecaptchaForContactAsync,setInputWithRecaptchaResponseToken:setInputWithRecaptchaResponseTokenForContact};case"job-apply":return{executeRecaptcha:executeRecaptchaForJobApplyAsync,setInputWithRecaptchaResponseToken:setInputWithRecaptchaResponseTokenForJobApply}}},S=async t=>{const{executeRecaptcha:e,setInputWithRecaptchaResponseToken:s}=E(t),a=await e();s(`g-recaptcha-response-data-${t}`,a)};r.on("submit",async function(t){t.preventDefault();const e=o(this)[0],s=e.getAttribute("action"),a=e.getAttribute("data-action");await S(a);const n=new FormData(e);o.ajax({url:s,type:"POST",data:n,headers:{"X-CSRF-TOKEN":o('meta[name="csrf-token"]').attr("content")},processData:!1,contentType:!1,beforeSend:T,complete:D})});export{x as a,b as c};
//# sourceMappingURL=contact.255af396.js.map
